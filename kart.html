---
layout: default
title: Utforsk brev på kart
permalink: /kart/
---

<div class="map-container">
  <h1>Geografisk utforskning</h1>

  <div class="map-controls">
    <button id="draw-area">Tegn område</button>
    <button id="clear-selection">Fjern valg</button>
    <span id="selection-count"></span>
  </div>

  <div id="map" style="height: 600px; width: 100%;"></div>
  <div id="selected-letters"></div>
</div>

<!-- Page-local styles (gentle overrides) -->
<style>
  .map-container { max-width: 1100px; margin: 0 auto; }
  #selected-letters { margin-top: 1rem; }

  /* big, comfy reading pane */
  .letter-list {
    max-height: 72vh;
    overflow: auto;
    padding-right: .5rem;
  }

  /* cards */
  .letter-item {
    background: #fff;
    border-radius: 12px;
    box-shadow: 0 1px 3px rgba(0,0,0,.06);
    padding: 14px 16px;
    margin: 12px 0;
  }

  .letter-item h4 { margin: 0 0 .35rem 0; font-size: 1.05rem; }

  .idline {
    display: flex; justify-content: space-between; align-items: baseline; gap: 8px;
  }
  .idline .dn-code {
    font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;
    font-weight: 600;
  }
  .idline .dn-archaic {
    color: #555; font-style: italic; font-size: .95rem;
  }

  .letter-item .meta {
    color: #666; margin: .15rem 0 .5rem 0; font-size: .95rem;
  }

  .letter-item .toggle-details {
    background: none; border: none; color: #0a62d0; padding: 0; font: inherit; cursor: pointer;
  }
  .letter-item .toggle-details:hover { text-decoration: underline; }

  .letter-item .details {
    border-top: 1px solid #eee; margin-top: .5rem; padding-top: .6rem;
  }
  .letter-item .sammendrag,
  .letter-item .brevtekst {
    white-space: pre-wrap;
    font-family: Georgia, "Times New Roman", serif;
    font-size: 1rem; line-height: 1.6;
    margin-top: .35rem;
  }
  .letter-item .section-label {
    display: block; font-weight: 600; color: #333; margin-top: .35rem;
  }

  .map-controls button {
    border: 1px solid #ddd; background: #f8f8f8; padding: .4rem .7rem;
    border-radius: 8px; margin-right: .4rem; cursor: pointer;
  }
  .map-controls button:hover { background: #f0f0f0; }
  #selection-count { float: right; color: #666; }
</style>

<!-- Leaflet core JS (CSS is in layout's <head>) -->
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" defer></script>

<!-- MarkerCluster -->
<link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.5.3/dist/MarkerCluster.css">
<link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.5.3/dist/MarkerCluster.Default.css">
<script src="https://unpkg.com/leaflet.markercluster@1.5.3/dist/leaflet.markercluster.js" defer></script>

<!-- Leaflet.Draw -->
<link rel="stylesheet" href="https://unpkg.com/leaflet-draw@1.0.4/dist/leaflet.draw.css">
<script src="https://unpkg.com/leaflet-draw@1.0.4/dist/leaflet.draw.js" defer></script>

<!-- baseurl for GH Pages -->
<script>window.SITE_BASE = "{{ '' | relative_url }}";</script>

<!-- Map logic -->
<script src="{{ '/assets/js/map.js' | relative_url }}" defer></script>
