---
layout: default
title: Søk i brevsamlingen
permalink: /sok/
---

<div class="search-container">
  <h1>Søk i brevsamlingen</h1>

  <div class="search-box">
    <input type="text" id="search-input" placeholder="Søk i 19.000 brev..." autocomplete="off">
    <button id="search-btn">Søk</button>
  </div>

  <div class="search-filters">
    <label><input type="checkbox" id="search-sammendrag" checked> Sammendrag</label>
    <label><input type="checkbox" id="search-brevtekst" checked> Brevtekst</label>
    <label><input type="checkbox" id="search-sted"> Sted</label>
    <label><input type="checkbox" id="search-kilde"> Kilde</label>
  </div>

  <!-- Date filters -->
  <div class="date-filters" aria-label="Filtrer på dato">
    <div class="date-row">
      <label>Fra
        <input id="date-from" inputmode="numeric" placeholder="YYYY, YYYY-MM eller YYYY-MM-DD">
      </label>
      <label>Til
        <input id="date-to" inputmode="numeric" placeholder="YYYY, YYYY-MM eller YYYY-MM-DD">
      </label>
      <label class="exact">
        <input type="checkbox" id="date-exact"> Eksakt dato
      </label>
      <button id="date-clear" class="ghost-btn" title="Tøm dato">Nullstill</button>
    </div>
    <div id="date-error" class="date-error" role="status" aria-live="polite"></div>
  </div>

  <!-- Export toolbar -->
  <div id="export-bar" class="export-bar" style="display:none;">
    <div class="export-left"><strong>Eksportér treff:</strong></div>
    <div class="export-right">
      <button id="export-txt" disabled>Last ned TXT</button>
      <button id="export-csv" disabled>Last ned CSV</button>
    </div>
  </div>

  <div id="search-status"></div>

  <div id="search-results"></div>
  <div id="results-pagination" class="pagination" style="display:none;"></div>
</div>

<!-- Page-local styles -->
<style>
  .search-container { max-width: 1100px; margin: 0 auto; }
  .search-box { display:flex; gap:.5rem; margin-bottom:.5rem; }
  .search-box input { flex:1; }
  .search-filters { margin-bottom:.5rem; display:flex; gap:1rem; flex-wrap:wrap; }

  .date-filters { margin: .25rem 0 .5rem 0; }
  .date-row { display:flex; gap:.5rem; align-items:center; flex-wrap:wrap; }
  .date-row label { display:flex; flex-direction:column; gap:.25rem; font-size:.95rem; }
  .date-row input[type="text"], .date-row input[type="search"], .date-row input:not([type]) {
    padding:.4rem .5rem; border:1px solid #ddd; border-radius:8px; min-width:16ch;
  }
  .date-row .exact { display:flex; flex-direction:row; align-items:center; gap:.35rem; margin-left:.25rem; }
  .ghost-btn {
    border:1px solid #ddd; background:#fafafa; padding:.4rem .7rem; border-radius:8px; cursor:pointer;
  }
  .ghost-btn:hover { background:#f0f0f0; }
  .date-error { color:#b00; min-height:1.2em; font-size:.9rem; margin-top:.25rem; }

  .export-bar {
    display: flex; align-items: center; justify-content: space-between;
    gap: .5rem; padding: .5rem .25rem; margin: .5rem 0 .25rem 0;
    border-bottom: 1px solid #eee;
  }
  .export-bar button {
    border: 1px solid #ddd; background: #f8f8f8; padding: .4rem .7rem;
    border-radius: 8px; margin-left: .25rem; cursor: pointer;
  }
  .export-bar button[disabled] { opacity: .5; cursor: not-allowed; }
  .export-bar button:hover:not([disabled]) { background:#f0f0f0; }

  .result-list {
    max-height: 72vh; overflow: auto; padding-right: .5rem;
  }
  .search-result {
    background: #fff; border-radius: 12px; box-shadow: 0 1px 3px rgba(0,0,0,.06);
    padding: 14px 16px; margin: 12px 0;
  }
  .idline { display: flex; justify-content: space-between; align-items: baseline; gap: 8px; }
  .idline .dn-code { font-family: ui-monospace,SFMono-Regular,Menlo,Consolas,monospace; font-weight: 600; }
  .idline .dn-archaic { color: #555; font-style: italic; font-size: .95rem; }
  .search-result h3 { margin: .35rem 0 .15rem 0; font-size: 1.05rem; }
  .search-result .meta { color:#666; margin: .15rem 0 .4rem 0; font-size:.95rem; }
  .toggle-details { background: none; border: none; color: #0a62d0; padding: 0; font: inherit; cursor: pointer; }
  .toggle-details:hover { text-decoration: underline; }
  .details { border-top:1px solid #eee; margin-top:.5rem; padding-top:.6rem; }
  .section-label { display:block; font-weight:600; color:#333; margin-top:.5rem; }
  .sammendrag, .brevtekst, .fotnoter, .tillegg {
    white-space: pre-wrap; font-family: Georgia,"Times New Roman",serif; font-size:1rem; line-height:1.6; margin-top:.35rem;
  }

  .pagination {
    display:flex; flex-wrap:wrap; gap:.35rem; align-items:center; justify-content:center; margin: .5rem 0 1.25rem 0;
  }
  .page-btn, .page-num {
    border:1px solid #ddd; background:#fafafa; padding:.35rem .6rem; border-radius:8px; cursor:pointer; user-select:none;
  }
  .page-btn[disabled] { opacity:.55; cursor:not-allowed; }
  .page-num.active { background:#0a62d0; color:#fff; border-color:#0a62d0; }
  .ellipsis { padding:.35rem .2rem; color:#888; }
</style>

<!-- MiniSearch -->
<script src="https://cdn.jsdelivr.net/npm/minisearch@6.1.0/dist/umd/index.min.js" defer></script>

<script>window.SITE_BASE = "{{ '' | relative_url }}";</script>

<script src="{{ '/assets/js/search.js' | relative_url }}" defer></script>
